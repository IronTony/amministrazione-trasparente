<?php/* Display a thankyou notice */add_action('admin_notices', 'at_admin_messages');function at_admin_messages() {	global $current_user ;        $user_id = $current_user->ID;	if ( ! get_user_meta($user_id, 'at_thankyou_ignore_notice') ) {        echo '<div class="updated"><p>';         printf(__('Grazie per avere installato Amministrazione Trasparente!<br/>Per la gestione delle spese dai un\'occhiata a <a href="http://wordpress.org/plugins/amministrazione-aperta/" target="_blank">Amministrazione Aperta</a> | <a href="%1$s">Nascondi</a>'), '?at_thankyou_nag_ignore=0');        echo "</p></div>";	}		if ( ! get_user_meta($user_id, 'at_wpatt_ignore_notice') ) {        echo '<div class="updated"><p>';         printf(__('Amministrazione Trasparente integra WP Attachments, che può visualizzare automaticamente i file caricati negli articoli e nelle pagine di Wordpress, in modo leggero e automatico! Per maggiori informazioni e <b>abilitare</b> questa funzione accedere a Trasparenza>Impostazioni e spuntare la casella di WP Attachments. | <a href="%1$s">Nascondi</a>'), '?at_wpatt_nag_ignore=0');        echo "</p></div>";	}		if ( ! get_user_meta($user_id, 'at_iavcp_ignore_notice') ) {        echo '<div class="updated"><p>';         printf(__('<<< AVVISO >>><br/>Il 31 gennaio 2014 scade il termine previsto per la trasmissione all’Autorità per la vigilanza sui contratti pubblici del file .xml relativo ai bandi di gara dell\'ente. (art.1 c. 32 L. n. 190/2012).<br/>		Per Wordpress puoi installare il plugin AVCP XML che permette di assolvere <b>contemporaneamente</b> l\'obbligo di tramissione del file .xml e pubblicazione delle informazioni sul sito istituzionale! <a href="http://wordpress.org/plugins/avcp" target="_blank">wordpress.org/plugins/avcp</a> | <a href="%1$s"><b>Nascondi questo avviso</b></a>'), '?at_iavcp_nag_ignore=0');        echo "</p></div>";	}		$get_at_option_id = get_option('at_option_id');	if ($get_at_option_id == '0') { /* Se  non è stato compilato l'url per "Torna al Sommario", informiamo brutalmente l'admin fino a quando non provvede :-) */		echo '<div class="error"><p>'; 		printf(__('Attenzione! Inserisci l\'id della pagina in cui è presente il tag [at-list] o [at-table] in Trasparenza > Impostazioni'));		echo "</p></div>";	}}add_action('admin_init', 'at_admin_messages_ignore');function at_admin_messages_ignore() {	global $current_user;        $user_id = $current_user->ID;        /* If user clicks to ignore the notice, add that to their user meta */        if ( isset($_GET['at_thankyou_nag_ignore']) && '0' == $_GET['at_thankyou_nag_ignore'] ) {             add_user_meta($user_id, 'at_thankyou_ignore_notice', 'true', true);		}		if ( isset($_GET['at_wpatt_nag_ignore']) && '0' == $_GET['at_wpatt_nag_ignore'] ) {             add_user_meta($user_id, 'at_wpatt_ignore_notice', 'true', true);		}		if ( isset($_GET['at_iavcp_nag_ignore']) && '0' == $_GET['at_iavcp_nag_ignore'] ) {             add_user_meta($user_id, 'at_iavcp_ignore_notice', 'true', true);		}}?>